<div class="min-h-screen bg-gray-100 dark:bg-neutral-900 p-6">

  <!-- Loading -->
  <div *ngIf="isLoading" class="text-center py-10">
    <i class="fas fa-spinner fa-spin text-3xl text-blue-500"></i>
    <p class="mt-3 dark:text-white">Loading users...</p>
  </div>

  <!-- No Users -->
  <div *ngIf="!isLoading && users.length === 0" class="text-gray-500">
    No users found.
  </div>

  <!-- Friend Requests -->
  <div *ngIf="!isLoading && friendRequests.length > 0" class="mb-8">
    <h3 class="text-xl font-semibold mb-3 dark:text-white">
      Friend Requests Â· <span>{{ friendRequests.length }}</span>
    </h3>
    <div class="space-y-4">
      <div *ngFor="let req of friendRequests" class="bg-white dark:bg-neutral-800 p-4 rounded-xl shadow flex items-center justify-between">
        <!-- Left -->
        <div class="flex items-center gap-3 cursor-pointer" [routerLink]="['/user_profile', req._id]">
          <img [src]="req.profileImage" class="w-12 h-12 rounded-full object-cover shadow" />
          <span class="font-medium dark:text-white">{{ req.name }}</span>
        </div>
        <!-- Actions -->
        <div class="flex gap-2">
          <button (click)="acceptFriendRequest(req._id)"
                  class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-sm">
            Confirm
          </button>
          <button (click)="rejectFriendRequest(req._id)"
                  class="bg-gray-200 hover:bg-gray-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 text-gray-700 dark:text-gray-200 px-3 py-1 rounded-md text-sm">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

<!-- People You May Know -->
  <h3 class="text-xl font-semibold mb-3 dark:text-white">
    People You May Know
  </h3>
  <!-- All Users -->
  <div *ngIf="!isLoading && users.length > 0" class="grid grid-cols-1 md:grid-cols-3 gap-6">
  <div *ngFor="let user of users" class="bg-white dark:bg-neutral-800 p-6 rounded-xl shadow relative">
    <div class="relative w-20 h-20 mx-auto cursor-pointer" [routerLink]="['/user_profile', user.id]">
      <img [src]="user.image" class="w-20 h-20 rounded-full object-cover shadow" />
    </div>

    <h3 class="mt-3 text-lg font-semibold text-center dark:text-white">{{ user.name }}</h3>
    <p class="text-sm text-gray-500 text-center">{{ user.role }}</p>

    <div class="mt-4 flex justify-center">
      <button *ngIf="user.relation === 'none'"
              (click)="sendFriendRequest(user.id)"
              class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-1 rounded-full text-sm">
        Add Friend
      </button>
      <span *ngIf="user.relation === 'pending'" class="text-gray-400 text-sm italic">Pending...</span>
      <button (click)="acceptFriendRequest(user.id)" *ngIf="user.relation === 'confirm'" class="bg-green-500 hover:bg-green-600 text-white px-4 py-1 rounded-full text-sm"> Confirm </button>
      <button (click)="rejectFriendRequest(user.id)" *ngIf="user.relation === 'confirm'" class="bg-gray-200 hover:bg-gray-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 ms-2 text-gray-700 dark:text-gray-200 px-4 py-1 rounded-full text-sm"> Delete </button>
    </div>
  </div>
</div>

</div>
